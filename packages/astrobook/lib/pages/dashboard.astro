---
import '@astrobook/ui/style.css'

import DashboardComponent from '@astrobook/ui/components/dashboard.astro'
import type { GetStaticPathsResult } from 'astro'
import modules from 'virtual:astrobook/story-modules.mjs'
import type { Story } from '@astrobook/types'

interface Params {
  story: string
}

export function getStaticPaths() {
  const stories: Story[] = modules.map((module) => module.stories).flat()
  return stories.map((story) => {
    return {
      params: {
        story: story.id,
      } satisfies Params,
    }
  }) satisfies GetStaticPathsResult
}

const params: Params = Astro.params
---

<DashboardComponent story={params.story} />
